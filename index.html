<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestor de Productos</title>
    <style>
        :root {
            --primary: #2a2a72;
            --secondary: #009ffd;
            --accent: #00d4ff;
            --light: #f8f9fa;
            --dark: #232528;
            --success: #28a745;
            --danger: #dc3545;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--primary), var(--secondary));
            color: var(--light);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 20px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            background: linear-gradient(to right, var(--accent), #fff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            text-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
        }

        .subtitle {
            font-size: 1.2rem;
            opacity: 0.8;
        }

        .app-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 20px;
        }

        @media (min-width: 768px) {
            .app-grid {
                grid-template-columns: 1fr 1fr;
            }
        }

        .card {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            backdrop-filter: blur(10px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .card-title {
            font-size: 1.5rem;
            margin-bottom: 15px;
            color: var(--accent);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            font-size: 1.8rem;
        }

        .form-group {
            margin-bottom: 15px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        input, textarea, select {
            width: 100%;
            padding: 12px;
            border-radius: 8px;
            border: 1px solid rgba(255, 255, 255, 0.2);
            background: rgba(0, 0, 0, 0.2);
            color: var(--light);
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input:focus, textarea:focus, select:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 0 2px rgba(0, 212, 255, 0.3);
        }

        .btn {
            padding: 12px 20px;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .btn-primary {
            background: var(--secondary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--accent);
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .btn-success {
            background: var(--success);
            color: white;
        }

        .btn-success:hover {
            background: #218838;
            transform: translateY(-2px);
        }

        .btn-danger {
            background: var(--danger);
            color: white;
        }

        .btn-danger:hover {
            background: #c82333;
            transform: translateY(-2px);
        }

        .camera-container {
            position: relative;
            width: 100%;
            height: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 10px;
            overflow: hidden;
            margin-bottom: 15px;
        }

        #camera-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .camera-controls {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 15px;
        }

        .captured-images {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-top: 15px;
        }

        .captured-image {
            width: 100px;
            height: 100px;
            border-radius: 8px;
            object-fit: cover;
            border: 2px solid var(--accent);
        }

        .products-list {
            max-height: 400px;
            overflow-y: auto;
            margin-top: 20px;
        }

        .product-item {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid var(--accent);
        }

        .product-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .product-name {
            font-weight: 600;
            font-size: 1.2rem;
        }

        .product-price {
            font-weight: 700;
            color: var(--accent);
        }

        .product-images {
            display: flex;
            gap: 10px;
            margin: 10px 0;
        }

        .product-image {
            width: 60px;
            height: 60px;
            border-radius: 5px;
            object-fit: cover;
        }

        .product-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
        }

        .action-btn {
            padding: 6px 12px;
            font-size: 0.8rem;
        }

        .whatsapp-btn {
            background: #25D366;
            color: white;
        }

        .whatsapp-btn:hover {
            background: #128C7E;
        }

        .project-controls {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .hidden {
            display: none;
        }

        .icon {
            font-size: 1.5rem;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding: 20px;
            font-size: 0.9rem;
            opacity: 0.7;
        }

        /* Estilos para el modal de vista previa */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
        }

        .modal-content {
            background: var(--dark);
            border-radius: 15px;
            padding: 20px;
            max-width: 90%;
            max-height: 90%;
            overflow: auto;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 1.5rem;
            color: var(--accent);
        }

        .close-modal {
            background: none;
            border: none;
            color: var(--light);
            font-size: 1.5rem;
            cursor: pointer;
        }

        /* Animaciones */
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }

        .pulse {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 212, 255, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 212, 255, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 212, 255, 0); }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="fade-in">
            <h1>Gestor de Productos Futurista</h1>
            <p class="subtitle">Captura, organiza y comparte informaci√≥n de tus productos</p>
        </header>

        <div class="app-grid">
            <!-- Secci√≥n de captura de productos -->
            <div class="card fade-in">
                <h2 class="card-title">
                    <span class="icon">üì∏</span> Capturar Producto
                </h2>
                
                <div class="form-group">
                    <label for="product-name">Nombre del Producto</label>
                    <input type="text" id="product-name" placeholder="Ingresa el nombre del producto">
                </div>
                
                <div class="form-group">
                    <label for="product-description">Descripci√≥n</label>
                    <textarea id="product-description" rows="3" placeholder="Describe el producto"></textarea>
                </div>
                
                <div class="form-row" style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <div class="form-group">
                        <label for="product-quantity">Cantidad al por mayor</label>
                        <input type="number" id="product-quantity" min="1" value="1">
                    </div>
                    
                    <div class="form-group">
                        <label for="product-price">Precio unitario ($)</label>
                        <input type="number" id="product-price" min="0" step="0.01" placeholder="0.00">
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Capturar im√°genes</label>
                    <div class="camera-container">
                        <video id="camera-preview" autoplay playsinline></video>
                        <canvas id="photo-canvas" class="hidden"></canvas>
                    </div>
                    
                    <div class="camera-controls">
                        <button id="switch-camera" class="btn btn-primary">
                            <span class="icon">üîÑ</span> Cambiar C√°mara
                        </button>
                        <button id="capture-btn" class="btn btn-success pulse">
                            <span class="icon">üì∑</span> Tomar Foto
                        </button>
                    </div>
                    
                    <div class="captured-images" id="captured-images">
                        <!-- Las im√°genes capturadas aparecer√°n aqu√≠ -->
                    </div>
                </div>
                
                <button id="save-product" class="btn btn-primary" style="width: 100%;">
                    <span class="icon">üíæ</span> Guardar Producto
                </button>
            </div>
            
            <!-- Secci√≥n de lista de productos -->
            <div class="card fade-in">
                <h2 class="card-title">
                    <span class="icon">üìã</span> Lista de Productos
                </h2>
                
                <div class="products-list" id="products-list">
                    <!-- Los productos guardados aparecer√°n aqu√≠ -->
                    <div class="empty-state" id="empty-state">
                        <p>No hay productos guardados. ¬°Captura tu primer producto!</p>
                    </div>
                </div>
                
                <div class="project-controls">
                    <button id="save-project" class="btn btn-primary">
                        <span class="icon">üíæ</span> Guardar Proyecto
                    </button>
                    <button id="load-project" class="btn btn-primary">
                        <span class="icon">üìÇ</span> Abrir Proyecto
                    </button>
                    <button id="download-html" class="btn btn-success">
                        <span class="icon">üìÑ</span> Descargar HTML
                    </button>
                </div>
            </div>
        </div>
        
        <footer class="fade-in">
            <p>Desarrollado para gesti√≥n de productos con estilo futurista</p>
        </footer>
    </div>

    <!-- Modal para vista previa del HTML -->
    <div id="preview-modal" class="modal hidden">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Vista Previa del HTML</h3>
                <button class="close-modal">&times;</button>
            </div>
            <div id="html-preview-content">
                <!-- El contenido HTML generado aparecer√° aqu√≠ -->
            </div>
            <div style="margin-top: 20px; text-align: center;">
                <button id="download-final" class="btn btn-success">
                    <span class="icon">‚¨áÔ∏è</span> Descargar HTML
                </button>
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let products = JSON.parse(localStorage.getItem('products')) || [];
        let capturedImages = [];
        let currentStream = null;
        let currentCamera = 'environment'; // 'environment' para c√°mara trasera, 'user' para frontal

        // Elementos del DOM
        const productNameInput = document.getElementById('product-name');
        const productDescriptionInput = document.getElementById('product-description');
        const productQuantityInput = document.getElementById('product-quantity');
        const productPriceInput = document.getElementById('product-price');
        const cameraPreview = document.getElementById('camera-preview');
        const photoCanvas = document.getElementById('photo-canvas');
        const captureBtn = document.getElementById('capture-btn');
        const switchCameraBtn = document.getElementById('switch-camera');
        const capturedImagesContainer = document.getElementById('captured-images');
        const saveProductBtn = document.getElementById('save-product');
        const productsList = document.getElementById('products-list');
        const emptyState = document.getElementById('empty-state');
        const saveProjectBtn = document.getElementById('save-project');
        const loadProjectBtn = document.getElementById('load-project');
        const downloadHtmlBtn = document.getElementById('download-html');
        const previewModal = document.getElementById('preview-modal');
        const closeModalBtn = document.querySelector('.close-modal');
        const htmlPreviewContent = document.getElementById('html-preview-content');
        const downloadFinalBtn = document.getElementById('download-final');

        // Inicializar la aplicaci√≥n
        document.addEventListener('DOMContentLoaded', function() {
            initCamera();
            updateProductsList();
            
            // Event listeners
            captureBtn.addEventListener('click', captureImage);
            switchCameraBtn.addEventListener('click', switchCamera);
            saveProductBtn.addEventListener('click', saveProduct);
            saveProjectBtn.addEventListener('click', saveProject);
            loadProjectBtn.addEventListener('click', loadProject);
            downloadHtmlBtn.addEventListener('click', generateHtmlPreview);
            closeModalBtn.addEventListener('click', () => previewModal.classList.add('hidden'));
            downloadFinalBtn.addEventListener('click', downloadHtml);
            
            // Cerrar modal al hacer clic fuera
            previewModal.addEventListener('click', function(e) {
                if (e.target === previewModal) {
                    previewModal.classList.add('hidden');
                }
            });
        });

        // Inicializar la c√°mara
        async function initCamera() {
            try {
                // Detener el stream actual si existe
                if (currentStream) {
                    currentStream.getTracks().forEach(track => track.stop());
                }
                
                // Obtener acceso a la c√°mara
                const constraints = {
                    video: { 
                        facingMode: currentCamera,
                        width: { ideal: 1280 },
                        height: { ideal: 720 }
                    },
                    audio: false
                };
                
                currentStream = await navigator.mediaDevices.getUserMedia(constraints);
                cameraPreview.srcObject = currentStream;
            } catch (error) {
                console.error('Error al acceder a la c√°mara:', error);
                alert('No se pudo acceder a la c√°mara. Aseg√∫rate de permitir el acceso.');
            }
        }

        // Cambiar entre c√°maras frontal y trasera
        function switchCamera() {
            currentCamera = currentCamera === 'environment' ? 'user' : 'environment';
            initCamera();
        }

        // Capturar imagen
        function captureImage() {
            const context = photoCanvas.getContext('2d');
            
            // Ajustar el tama√±o del canvas al del video
            photoCanvas.width = cameraPreview.videoWidth;
            photoCanvas.height = cameraPreview.videoHeight;
            
            // Dibujar el frame actual del video en el canvas
            context.drawImage(cameraPreview, 0, 0, photoCanvas.width, photoCanvas.height);
            
            // Convertir a data URL (formato base64)
            const imageDataUrl = photoCanvas.toDataURL('image/jpeg');
            
            // Agregar a la lista de im√°genes capturadas
            capturedImages.push(imageDataUrl);
            
            // Actualizar la vista de im√°genes capturadas
            updateCapturedImages();
        }

        // Actualizar la vista de im√°genes capturadas
        function updateCapturedImages() {
            capturedImagesContainer.innerHTML = '';
            
            capturedImages.forEach((image, index) => {
                const imgElement = document.createElement('img');
                imgElement.src = image;
                imgElement.className = 'captured-image';
                imgElement.alt = `Imagen ${index + 1}`;
                
                // Agregar bot√≥n para eliminar
                const deleteBtn = document.createElement('button');
                deleteBtn.className = 'btn btn-danger action-btn';
                deleteBtn.innerHTML = '‚ùå';
                deleteBtn.style.position = 'absolute';
                deleteBtn.style.top = '5px';
                deleteBtn.style.right = '5px';
                deleteBtn.style.padding = '2px 5px';
                deleteBtn.style.fontSize = '0.7rem';
                
                const container = document.createElement('div');
                container.style.position = 'relative';
                container.style.display = 'inline-block';
                container.appendChild(imgElement);
                container.appendChild(deleteBtn);
                
                // Evento para eliminar imagen
                deleteBtn.addEventListener('click', () => {
                    capturedImages.splice(index, 1);
                    updateCapturedImages();
                });
                
                capturedImagesContainer.appendChild(container);
            });
        }

        // Guardar producto
        function saveProduct() {
            const name = productNameInput.value.trim();
            const description = productDescriptionInput.value.trim();
            const quantity = parseInt(productQuantityInput.value);
            const price = parseFloat(productPriceInput.value);
            
            // Validaciones
            if (!name) {
                alert('Por favor, ingresa un nombre para el producto.');
                return;
            }
            
            if (!price || price <= 0) {
                alert('Por favor, ingresa un precio v√°lido para el producto.');
                return;
            }
            
            if (capturedImages.length === 0) {
                alert('Por favor, captura al menos una imagen del producto.');
                return;
            }
            
            // Crear objeto producto
            const product = {
                id: Date.now(), // ID √∫nico basado en timestamp
                name,
                description,
                quantity,
                price,
                images: [...capturedImages], // Copiar el array de im√°genes
                date: new Date().toLocaleString()
            };
            
            // Agregar a la lista de productos
            products.push(product);
            
            // Guardar en localStorage
            localStorage.setItem('products', JSON.stringify(products));
            
            // Actualizar la lista de productos
            updateProductsList();
            
            // Limpiar el formulario
            resetForm();
            
            // Mostrar mensaje de √©xito
            alert('Producto guardado exitosamente!');
        }

        // Actualizar la lista de productos
        function updateProductsList() {
            productsList.innerHTML = '';
            
            if (products.length === 0) {
                productsList.appendChild(emptyState);
                emptyState.classList.remove('hidden');
                return;
            }
            
            emptyState.classList.add('hidden');
            
            products.forEach(product => {
                const productItem = document.createElement('div');
                productItem.className = 'product-item fade-in';
                
                productItem.innerHTML = `
                    <div class="product-header">
                        <div class="product-name">${product.name}</div>
                        <div class="product-price">$${product.price.toFixed(2)}</div>
                    </div>
                    <div class="product-description">${product.description}</div>
                    <div class="product-images">
                        ${product.images.map(img => `<img src="${img}" class="product-image" alt="${product.name}">`).join('')}
                    </div>
                    <div class="product-details">
                        <div><strong>Cantidad:</strong> ${product.quantity}</div>
                        <div><strong>Total:</strong> $${(product.quantity * product.price).toFixed(2)}</div>
                        <div><strong>Fecha:</strong> ${product.date}</div>
                    </div>
                    <div class="product-actions">
                        <button class="btn whatsapp-btn action-btn" data-product="${product.id}">
                            <span class="icon">üí¨</span> Contactar por WhatsApp
                        </button>
                        <button class="btn btn-danger action-btn" data-product="${product.id}">
                            <span class="icon">üóëÔ∏è</span> Eliminar
                        </button>
                    </div>
                `;
                
                productsList.appendChild(productItem);
            });
            
            // Agregar event listeners a los botones
            document.querySelectorAll('.whatsapp-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-product'));
                    contactWhatsApp(productId);
                });
            });
            
            document.querySelectorAll('.btn-danger.action-btn').forEach(btn => {
                btn.addEventListener('click', function() {
                    const productId = parseInt(this.getAttribute('data-product'));
                    deleteProduct(productId);
                });
            });
        }

        // Contactar por WhatsApp
        function contactWhatsApp(productId) {
            const product = products.find(p => p.id === productId);
            if (!product) return;
            
            const phoneNumber = "+593986122265";
            const message = `Hola, estoy interesado en el producto: ${product.name}. Precio: $${product.price}. ¬øPodr√≠as darme m√°s informaci√≥n?`;
            const encodedMessage = encodeURIComponent(message);
            const whatsappUrl = `https://wa.me/${phoneNumber}?text=${encodedMessage}`;
            
            window.open(whatsappUrl, '_blank');
        }

        // Eliminar producto
        function deleteProduct(productId) {
            if (confirm('¬øEst√°s seguro de que quieres eliminar este producto?')) {
                products = products.filter(p => p.id !== productId);
                localStorage.setItem('products', JSON.stringify(products));
                updateProductsList();
            }
        }

        // Resetear formulario
        function resetForm() {
            productNameInput.value = '';
            productDescriptionInput.value = '';
            productQuantityInput.value = '1';
            productPriceInput.value = '';
            capturedImages = [];
            updateCapturedImages();
        }

        // Guardar proyecto
        function saveProject() {
            if (products.length === 0) {
                alert('No hay productos para guardar.');
                return;
            }
            
            const projectData = JSON.stringify(products);
            const blob = new Blob([projectData], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'proyecto_productos.json';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            alert('Proyecto guardado exitosamente!');
        }

        // Cargar proyecto
        function loadProject() {
            const input = document.createElement('input');
            input.type = 'file';
            input.accept = '.json';
            
            input.addEventListener('change', function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const loadedProducts = JSON.parse(e.target.result);
                        products = loadedProducts;
                        localStorage.setItem('products', JSON.stringify(products));
                        updateProductsList();
                        alert('Proyecto cargado exitosamente!');
                    } catch (error) {
                        alert('Error al cargar el proyecto. El archivo puede estar corrupto.');
                    }
                };
                reader.readAsText(file);
            });
            
            input.click();
        }

        // Generar vista previa del HTML
        function generateHtmlPreview() {
            if (products.length === 0) {
                alert('No hay productos para generar el HTML.');
                return;
            }
            
            const htmlContent = generateHtmlContent();
            htmlPreviewContent.innerHTML = htmlContent;
            previewModal.classList.remove('hidden');
        }

        // Generar contenido HTML para descargar
        function generateHtmlContent() {
            let html = `
            <!DOCTYPE html>
            <html lang="es">
            <head>
                <meta charset="UTF-8">
                <meta name="viewport" content="width=device-width, initial-scale=1.0">
                <title>Cat√°logo de Productos</title>
                <style>
                    body {
                        font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                        background: linear-gradient(135deg, #2a2a72, #009ffd);
                        color: #fff;
                        margin: 0;
                        padding: 20px;
                    }
                    .container {
                        max-width: 1200px;
                        margin: 0 auto;
                    }
                    header {
                        text-align: center;
                        margin-bottom: 40px;
                        padding: 20px;
                        background: rgba(0, 0, 0, 0.3);
                        border-radius: 15px;
                    }
                    h1 {
                        font-size: 2.5rem;
                        margin-bottom: 10px;
                        background: linear-gradient(to right, #00d4ff, #fff);
                        -webkit-background-clip: text;
                        background-clip: text;
                        color: transparent;
                    }
                    .products-grid {
                        display: grid;
                        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
                        gap: 20px;
                    }
                    .product-card {
                        background: rgba(255, 255, 255, 0.1);
                        border-radius: 15px;
                        padding: 20px;
                        backdrop-filter: blur(10px);
                        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
                        border: 1px solid rgba(255, 255, 255, 0.1);
                    }
                    .product-name {
                        font-size: 1.5rem;
                        margin-bottom: 10px;
                        color: #00d4ff;
                    }
                    .product-price {
                        font-size: 1.8rem;
                        font-weight: bold;
                        margin: 10px 0;
                        color: #00d4ff;
                    }
                    .product-images {
                        display: flex;
                        gap: 10px;
                        margin: 15px 0;
                        overflow-x: auto;
                    }
                    .product-image {
                        width: 100px;
                        height: 100px;
                        border-radius: 8px;
                        object-fit: cover;
                        border: 2px solid #00d4ff;
                    }
                    .product-description {
                        margin: 10px 0;
                        opacity: 0.8;
                    }
                    .whatsapp-btn {
                        display: inline-block;
                        background: #25D366;
                        color: white;
                        padding: 10px 15px;
                        border-radius: 8px;
                        text-decoration: none;
                        font-weight: bold;
                        margin-top: 10px;
                        transition: background 0.3s;
                    }
                    .whatsapp-btn:hover {
                        background: #128C7E;
                    }
                    footer {
                        text-align: center;
                        margin-top: 40px;
                        padding: 20px;
                        opacity: 0.7;
                    }
                </style>
            </head>
            <body>
                <div class="container">
                    <header>
                        <h1>Cat√°logo de Productos</h1>
                        <p>Generado el ${new Date().toLocaleString()}</p>
                    </header>
                    
                    <div class="products-grid">
            `;
            
            products.forEach(product => {
                html += `
                    <div class="product-card">
                        <h2 class="product-name">${product.name}</h2>
                        <div class="product-price">$${product.price.toFixed(2)}</div>
                        <div class="product-description">${product.description}</div>
                        
                        <div class="product-images">
                `;
                
                product.images.forEach(img => {
                    html += `<img src="${img}" class="product-image" alt="${product.name}">`;
                });
                
                html += `
                        </div>
                        
                        <div class="product-details">
                            <p><strong>Cantidad:</strong> ${product.quantity}</p>
                            <p><strong>Total:</strong> $${(product.quantity * product.price).toFixed(2)}</p>
                            <p><strong>Fecha:</strong> ${product.date}</p>
                        </div>
                        
                        <a href="https://wa.me/593986122265?text=Hola, estoy interesado en el producto: ${encodeURIComponent(product.name)}. Precio: $${product.price}. ¬øPodr√≠as darme m√°s informaci√≥n?" 
                           class="whatsapp-btn" target="_blank">
                            üí¨ Contactar por WhatsApp
                        </a>
                    </div>
                `;
            });
            
            html += `
                    </div>
                    
                    <footer>
                        <p>Cat√°logo generado autom√°ticamente - Todos los derechos reservados</p>
                    </footer>
                </div>
            </body>
            </html>
            `;
            
            return html;
        }

        // Descargar HTML
        function downloadHtml() {
            const htmlContent = generateHtmlContent();
            const blob = new Blob([htmlContent], { type: 'text/html' });
            const url = URL.createObjectURL(blob);
            
            const a = document.createElement('a');
            a.href = url;
            a.download = 'catalogo_productos.html';
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
            
            previewModal.classList.add('hidden');
            alert('HTML descargado exitosamente!');
        }
    </script>
</body>
</html>
