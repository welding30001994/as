<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Asistente Virtual por Voz</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a2a6c, #b21f1f, #fdbb2d);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .container {
            width: 100%;
            max-width: 800px;
            background-color: rgba(255, 255, 255, 0.95);
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(90deg, #4b6cb7, #182848);
            color: white;
            padding: 25px;
            text-align: center;
            position: relative;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .status {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            align-items: center;
            background-color: rgba(255, 255, 255, 0.2);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }
        
        .status-dot {
            width: 10px;
            height: 10px;
            background-color: #4cc759;
            border-radius: 50%;
            margin-right: 8px;
        }
        
        .main-content {
            padding: 30px;
        }
        
        .voice-controls {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin-bottom: 30px;
        }
        
        .mic-btn {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, #4b6cb7, #182848);
            border: none;
            color: white;
            font-size: 2rem;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .mic-btn:hover {
            transform: scale(1.05);
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.25);
        }
        
        .mic-btn.listening {
            background: linear-gradient(135deg, #ff416c, #ff4b2b);
            animation: pulse 1.5s infinite;
        }
        
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }
        
        .status-text {
            font-size: 1.2rem;
            margin-bottom: 15px;
            text-align: center;
            min-height: 30px;
            color: #333;
        }
        
        .conversation {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            height: 300px;
            overflow-y: auto;
            margin-bottom: 20px;
            border: 1px solid #e9ecef;
        }
        
        .message {
            margin-bottom: 15px;
            padding: 12px 18px;
            border-radius: 18px;
            max-width: 80%;
            line-height: 1.5;
        }
        
        .user-message {
            background-color: #e3f2fd;
            margin-left: auto;
            border-bottom-right-radius: 5px;
            text-align: right;
        }
        
        .ai-message {
            background-color: #f1f3f4;
            margin-right: auto;
            border-bottom-left-radius: 5px;
        }
        
        .suggestions {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            justify-content: center;
        }
        
        .suggestion-btn {
            background-color: #e9ecef;
            border: none;
            border-radius: 20px;
            padding: 10px 20px;
            cursor: pointer;
            transition: background-color 0.2s;
            font-size: 0.9rem;
        }
        
        .suggestion-btn:hover {
            background-color: #dde1e6;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            background-color: #f8f9fa;
            color: #6c757d;
            font-size: 0.9rem;
        }
        
        @media (max-width: 600px) {
            h1 {
                font-size: 1.8rem;
            }
            
            .mic-btn {
                width: 70px;
                height: 70px;
            }
            
            .message {
                max-width: 90%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Asistente Virtual por Voz</h1>
            <p class="subtitle">Habla conmigo y te responder√© al instante</p>
            <div class="status">
                <div class="status-dot"></div>
                <span>Conectado</span>
            </div>
        </header>
        
        <div class="main-content">
            <div class="voice-controls">
                <button class="mic-btn" id="micButton">
                    <i>üé§</i>
                </button>
                <div class="status-text" id="statusText">Presiona el bot√≥n y habla</div>
            </div>
            
            <div class="conversation" id="conversation">
                <div class="message ai-message">
                    Hola! Soy tu asistente virtual. Presiona el bot√≥n de micr√≥fono y habla para que pueda responderte.
                </div>
            </div>
            
            <div class="suggestions">
                <button class="suggestion-btn" data-query="¬øQu√© puedes hacer?">¬øQu√© puedes hacer?</button>
                <button class="suggestion-btn" data-query="Expl√≠came los FVG">Expl√≠came los FVG</button>
                <button class="suggestion-btn" data-query="¬øQu√© es un sweep?">¬øQu√© es un sweep?</button>
                <button class="suggestion-btn" data-query="Conceptos de trading">Conceptos de trading</button>
            </div>
        </div>
        
        <footer>
            <p>Asistente Virtual &copy; 2023 - Habla claro y con un ritmo normal para mejor reconocimiento</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const micButton = document.getElementById('micButton');
            const statusText = document.getElementById('statusText');
            const conversation = document.getElementById('conversation');
            const suggestionButtons = document.querySelectorAll('.suggestion-btn');
            
            // Comprobar compatibilidad con reconocimiento de voz
            const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
            
            if (!SpeechRecognition) {
                statusText.textContent = "Tu navegador no soporta reconocimiento de voz. Prueba con Chrome o Edge.";
                micButton.disabled = true;
                return;
            }
            
            const recognition = new SpeechRecognition();
            recognition.continuous = false;
            recognition.lang = 'es-ES';
            recognition.interimResults = false;
            recognition.maxAlternatives = 1;
            
            // S√≠ntesis de voz
            const synth = window.speechSynthesis;
            
            micButton.addEventListener('click', function() {
                if (micButton.classList.contains('listening')) {
                    recognition.stop();
                    micButton.classList.remove('listening');
                    statusText.textContent = "Reconocimiento detenido";
                } else {
                    recognition.start();
                    micButton.classList.add('listening');
                    statusText.textContent = "Escuchando... habla ahora";
                }
            });
            
            recognition.onresult = function(event) {
                const speechResult = event.results[0][0].transcript;
                micButton.classList.remove('listening');
                statusText.textContent = "Procesando...";
                
                // Mostrar mensaje del usuario
                addMessage(speechResult, 'user');
                
                // Procesar la consulta y obtener respuesta
                setTimeout(() => {
                    const response = getResponse(speechResult);
                    addMessage(response, 'ai');
                    speakResponse(response);
                    statusText.textContent = "Presiona el bot√≥n y habla";
                }, 1000);
            };
            
            recognition.onerror = function(event) {
                micButton.classList.remove('listening');
                statusText.textContent = "Error: " + event.error;
            };
            
            recognition.onend = function() {
                if (micButton.classList.contains('listening')) {
                    micButton.classList.remove('listening');
                    statusText.textContent = "Presiona el bot√≥n y habla";
                }
            };
            
            // A√±adir funcionalidad a los botones de sugerencias
            suggestionButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const query = this.getAttribute('data-query');
                    addMessage(query, 'user');
                    
                    setTimeout(() => {
                        const response = getResponse(query);
                        addMessage(response, 'ai');
                        speakResponse(response);
                    }, 500);
                });
            });
            
            function addMessage(text, type) {
                const messageElement = document.createElement('div');
                messageElement.classList.add('message');
                messageElement.classList.add(type === 'user' ? 'user-message' : 'ai-message');
                messageElement.textContent = text;
                
                conversation.appendChild(messageElement);
                conversation.scrollTop = conversation.scrollHeight;
            }
            
            function speakResponse(text) {
                if (synth.speaking) {
                    synth.cancel();
                }
                
                const utterance = new SpeechSynthesisUtterance(text);
                utterance.lang = 'es-ES';
                utterance.rate = 1.0;
                utterance.pitch = 1.0;
                
                synth.speak(utterance);
            }
            
            function getResponse(query) {
                query = query.toLowerCase();
                
                // Respuestas predefinidas seg√∫n las palabras clave
                if (query.includes('hola') || query.includes('buenos d√≠as') || query.includes('buenas tardes')) {
                    return "¬°Hola! Soy tu asistente virtual. Puedes preguntarme sobre trading, an√°lisis t√©cnico o cualquier otro tema. ¬øEn qu√© puedo ayudarte?";
                } else if (query.includes('fvg') || query.includes('fair value gap')) {
                    return "FVG son las siglas de Fair Value Gap. Es un concepto de trading que se refiere a un espacio de valor justo en el gr√°fico de precios. Ocurre cuando hay una diferencia significativa entre el cierre de una vela y la apertura de la siguiente, dejando un 'hueco' en el gr√°fico. Los traders suelen observar estos espacios como posibles zonas de soporte o resistencia en el futuro.";
                } else if (query.includes('sweep')) {
                    return "En trading, un 'sweep' se refiere a cuando el precio 'barre' o supera un nivel clave de soporte o resistencia, a menudo tomando √≥rdenes de stop loss antes de revertir la direcci√≥n. Esto crea una mecha o sombra larga en la vela y puede indicar un agotamiento del movimiento actual.";
                } else if (query.includes('trading') || query.includes('conceptos')) {
                    return "Conceptos b√°sicos de trading incluyen: 1) Soporte y resistencia - niveles donde el precio tiende a rebotar, 2) Tendencia - direcci√≥n general del mercado, 3) Velas japonesas - representaci√≥n visual de movimientos de precio, 4) Indicadores t√©cnicos - herramientas para analizar el mercado, y 5) Gesti√≥n de riesgo - proteger tu capital con stops y posici√≥n sizing.";
                } else if (query.includes('qu√© puedes hacer') || query.includes('qu√© sabes')) {
                    return "Puedo explicarte conceptos de trading como FVG, sweeps, soporte y resistencia, tendencias y m√°s. Tambi√©n puedo responder preguntas generales. Solo tienes que preguntar!";
                } else if (query.includes('gracias')) {
                    return "De nada! Estoy aqu√≠ para ayudarte cuando lo necesites. ¬øHay algo m√°s en lo que pueda asistirte?";
                } else {
                    return "Interesante pregunta. Bas√°ndome en tu consulta sobre '" + query + "', te recomiendo estudiar m√°s sobre an√°lisis t√©cnico y patrones de precio. ¬øTe gustar√≠a que profundice en alg√∫n concepto espec√≠fico de trading?";
                }
            }
        });
    </script>
</body>
</html>
